---
layout: post
title: Converting SecureString to String
---

<a href="http://blogs.msdn.com/fpintos/archive/2009/06/12/how-to-properly-convert-securestring-to-string.aspx">This blog</a> shows the correct way to convert a SecureString to a String for the many APIs that require it.<br /><br />Copied here in case the link breaks sometime in the future:<br /><pre class="brush: csharp">public static string ConvertToUnsecureString(this SecureString securePassword)<br />{<br />    if (securePassword == null)<br />        throw new ArgumentNullException("securePassword");<br /><br />    IntPtr unmanagedString = IntPtr.Zero;<br />    try<br />    {<br />        unmanagedString = Marshal.SecureStringToGlobalAllocUnicode(securePassword);<br />        return Marshal.PtrToStringUni(unmanagedString);<br />    }<br />    finally<br />    {<br />        Marshal.ZeroFreeGlobalAllocUnicode(unmanagedString);<br />    }<br />}<br /><br />public static SecureString ConvertToSecureString(this string password)<br />{<br />    if (password == null)<br />        throw new ArgumentNullException("password");<br /><br />    unsafe<br />    {<br />        fixed (char* passwordChars = password)<br />        {<br />            var securePassword = new SecureString(passwordChars, password.Length);<br />            securePassword.MakeReadOnly();<br />            return securePassword;<br />        }<br />    }<br />}<br /></pre>
