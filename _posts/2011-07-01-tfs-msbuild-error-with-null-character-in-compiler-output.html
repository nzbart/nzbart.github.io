---
layout: post
title: TFS/MSBuild error with null character in compiler output
---

I ran into the following error on the TFS build server, which is building a MicroFocus Cobol.NET program: <br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-QwysI11wW3Q/Tg0cmEN0XiI/AAAAAAAAAH4/MB2X9tcxN1U/s1600/msbuilderror.png" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" width="100%" src="http://4.bp.blogspot.com/-QwysI11wW3Q/Tg0cmEN0XiI/AAAAAAAAAH4/MB2X9tcxN1U/s1600/msbuilderror.png" alt="MSBUILD : error MSB4015: The build stopped unexpectedly because the &quot;WorkflowCentralLogger&quot; logger failed unexpectedly during shutdown. System.ArgumentException: '.', hexadecimal value 0x00, is an invalid character. at System.Xml.XmlConvert.VerifyCharData(String data, ExceptionType invCharExceptionType, ExceptionType invSurrogateExceptionType) at System.Xml.XmlCharCheckingWriter.WriteString(String text) at System.Xml.XmlWriter.WriteAttributeString(String localName, String value) at Microsoft.TeamFoundation.Build.Client.InformationField.ToXml(XmlWriter writer, String element) at Microsoft.TeamFoundation.Build.Client.Helper.ToXml(XmlWriter writer, String element, InformationField[] array) at Microsoft.TeamFoundation.Build.Client.InformationAddRequest.ToXml(XmlWriter writer, String element) at Microsoft.TeamFoundation.Build.Client.Helper.ToXml(XmlWriter writer, String element, InformationChangeRequest[] array) at Microsoft.TeamFoundation.Build.Client.BuildWebService.UpdateBuildInformation(InformationChangeRequest[] changes)" /></a></div><br />Based on the stack trace, it looks like there was a problem converting the build output to XML, so it was just a matter of finding the culprit. A quick search through the build output using PowerShell located the offending \0 character (which it is not possible to represent in XML), so I loaded the build log into NotePad++ to confirm:<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-c91f3bQRnr4/Tg0eXOtbQiI/AAAAAAAAAIA/Kow6dvRZDZ8/s1600/nulchar.PNG" imageanchor="1" style="margin-left:1em; margin-right:1em"><img border="0" width=479 src="http://3.bp.blogspot.com/-c91f3bQRnr4/Tg0eXOtbQiI/AAAAAAAAAIA/Kow6dvRZDZ8/s1600/nulchar.PNG"  alt="NUL char in NotePad++"/></a></div><br />Hopefully this will help anyone else who may run into this issue in TFS.
